---
# tasks file for nightawk

- block:

  - include_tasks: http-tasks.yml
    when: "'http' in {{ workload_args.terminations }} or 'mix' in {{ workload_args.terminations }}"

  - include_tasks: edge-tasks.yml
    when: "'edge' in {{ workload_args.terminations }} or 'mix' in {{ workload_args.terminations }}"

  - include_tasks: passthrough-tasks.yml
    when: "'passthrough' in {{ workload_args.terminations }} or 'mix' in {{ workload_args.terminations }}"

  - include_tasks: reencrypt-tasks.yml
    when: "'reencrypt' in {{ workload_args.terminations }} or 'mix' in {{ workload_args.terminations }}"
  
  - include_role:
      name: benchmark_state
      tasks_from: set_state
    vars:
      state: Starting Servers

  when: benchmark_state.resources[0].status.state == "Building" and resource_kind == "pod"