---
global:
  writeToFile: false
{% if prometheus is defined and prometheus.prom_url is defined %}
  indexerConfig:
    enabled: true
    esServers: [{{ prometheus.server }}]
    insecureSkipVerify: true
    defaultIndex: {{ workload_args.default_index|default("ripsaw-kube-burner") }}
    type: elastic
{% endif %}

jobs:
  - name: kubelet-density-heavy
    jobIterations: {{ workload_args.job_iterations }}
    qps: {{ workload_args.qps|default(5) }}
    burst: {{ workload_args.burst|default(10) }}
    namespacedIterations: false
    namespace: kubelet-density-heavy
    podWait: {{ workload_args.pod_wait|default(false) }}
    waitWhenFinished: {{ workload_args.wait_when_finished|default(true) }}
    verifyObjects: {{ workload_args.verify_objects|default(true) }}
    errorOnVerify: {{ workload_args.error_on_verify|default(false) }}
    objects:

      - objectTemplate: postgres-deployment.yml
        replicas: 1

      - objectTemplate: app-deployment.yml
        replicas: 1
        inputVars:
          readinessPeriod: 10

      - objectTemplate: postgres-service.yml
        replicas: 1
