apiVersion: ripsaw.cloudbulldozer.io/v1alpha1
kind: Benchmark
metadata:
  name: fio-benchmark
  namespace: my-ripsaw
spec:
  clustername: myk8scluster
#  elasticsearch:
#    server: <es_server>
#    port: 9200
#  test_user: ripsaw
  workload:
    name: "fio_distributed"
    args:
      samples: 1
      servers: 1
      pin_server: ''
      jobs:
        - read
        - write
      # NOTE: fio units should be given in IEC standard long format, i.e. KiB, MiB, GiB, TiB
      bs:
        - 64KiB
      numjobs:
        - 1
      iodepth: 4
      runtime: 60
      ramp_time: 5
      # NOTE: fio units should be given in IEC standard long format, i.e. KiB, MiB, GiB, TiB
      filesize: 2GiB
      log_sample_rate: 1000
      #storageclass: rook-ceph-block
      # NOTE: storageclass units should be given in IEC standard short format, i.e. Ki, Mi, Gi, Ti
      #storagesize: 5Gi
#######################################
#  EXPERT AREA - MODIFY WITH CAUTION  #
#######################################
#  global_overrides:
#    - "key=value"
  job_params:
    - jobname_match: "w"
      params:
        - "fsync_on_close=1"
        - "create_on_open=1"
    - jobname_match: "rw"
      params:
        - "rwmixread=50"
    - jobname_match: "readwrite"
      params:
        - "rwmixread=50"
#    - jobname_match: "<search_string>"
#      params:
#        - "key=value"
